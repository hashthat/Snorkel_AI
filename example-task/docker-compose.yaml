# docker-compose.yaml  ‚Üê must be this exact filename
version: "3.8"

services:
  task:
    build:
      context: .
      dockerfile: Dockerfile
    image: ${T_BENCH_TASK_DOCKER_CLIENT_IMAGE_NAME:-terminal-bench-task-local}
    container_name: ${T_BENCH_TASK_DOCKER_CLIENT_CONTAINER_NAME:-terminal-bench-task}
    stdin_open: true
    tty: true
    cap_drop:
      - ALL
    security_opt:
      - no-new-privileges:true
    read_only: false
    tmpfs:
      - /tmp:noexec,nosuid,size=10m
    volumes:
      - .:/workspace:rw
      - /workspace/.git:/workspace/.git:ro    # optional but recommended
    working_dir: /workspace
    environment:
      - TERM=xterm-256color
      - LANG=C.UTF-8
      - TEST_DIR=/workspace/tests
    command: ["sleep", "infinity"]